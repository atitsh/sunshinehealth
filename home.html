<html>

<head>
    <title>Sunshine Health</title>
    <script>
        !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"];analytics.factory=function(e){return function(){var t=Array.prototype.slice.call(arguments);t.unshift(e);analytics.push(t);return analytics}};for(var e=0;e<analytics.methods.length;e++){var key=analytics.methods[e];analytics[key]=analytics.factory(key)}analytics.load=function(key,e){var t=document.createElement("script");t.type="text/javascript";t.async=!0;t.src="https://cdn.segment.com/analytics.js/v1/" + key + "/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n);analytics._loadOptions=e};analytics._writeKey="uUXnhQpv48QXLEbGtAA3ciIMZnA3LxH0";;analytics.SNIPPET_VERSION="4.15.3";
          analytics.load("uUXnhQpv48QXLEbGtAA3ciIMZnA3LxH0");
          analytics.page();
          }}();
        
        window.onload = function product_search() {
            analytics.track('Patient Details', {
	    url: '/home.html'
          });
        }
    </script> 
    
</head>

<body>
    <h1>Sunshine Health</h1>
    
	<h2>Record Patient Condition</h2>
   
	<table max-width="800px">
		<tr>
            <td style="padding: 10px;"> First Name: </td>
            <td> <input id="firstname" name="firstname" required="" size="50" type="text" /></td>
		</tr>        
        <tr>
            <td style="padding: 10px;"> Last Name: </td>
            <td> <input id="lastname" name="lastname" required="" size="50" type="text" /></td>
		</tr>        
		<tr>
            <td style="padding: 10px;"> Email: </td>
            <td> <input id="email" name="email" required="" size="50" type="email" /></td>
		</tr>        
        <tr>
            <td style="padding: 10px;"> Condition: </td>
            <td> <select name="condition" id="condition">
			<option value="Diabetic">Allergy</option>
			<option value="Diabetic">Diabetic</option>
                        <option value="Pre-diabetic">Pre-diabetic</option>
		</select>
            </td>
	</tr>        
    </table> 
    <br/>
    <input type="button" value="Submit" onclick="identify_event(document.getElementById('firstname').value, document.getElementById('lastname').value, document.getElementById('email').value, document.getElementById('condition').value)">
    <br>&nbsp;</br>
    
    <hr size="5" color="#adebad">
    
    <h2>View Products</h2>
    <input type="button" value="View Products" onclick="view_products()">	
    
    <div id="product_list" hidden>	
	    <table max-width="800px">
		<tr>
		    <td style="padding: 10px;">
			<img src="https://atitsh.github.io/sunshinehealth/images/zyrtec_main.webp" width="200px"></img>
		    </td>

		    <td style="padding: 10px;">
			<img src="https://atitsh.github.io/sunshinehealth/images/allegra.webp" width="200px"></img>

		    </td>

		    <td style="padding: 10px;">
			<img src="https://atitsh.github.io/sunshinehealth/images/claritin.1" width="200px"></img>
		    </td>

		</tr>
		<tr>
		    <td align=center>
			<input type="button" value="Add to Cart" onclick="track_event('zyrtec','50580-779-12')">
		    </td>
		    <td align=center>
			<input type="button" value="Add to Cart" onclick="track_event('allegra', '16590-852-30')">
		    </td>
		    <td align=center>
			<input type="button" value="Add to Cart" onclick="track_event('claritin', '11523-0007-80')">
		    </td>
		</tr>

		<tr>
		    <td colspan="3" align="center">
			<br /><br />
			<input id="carted" name="carted" type="text" hidden/>
			<input type="button" value="Check Out" onclick="track_checkout(document.getElementById('carted').value)">
		    </td>
		</tr>

	    </table>
	</div> 

	<br>&nbsp;</br>
    
	<hr size="5" color="#adebad">

	<h2>Other Events</h2>

	<input type="button" value="Block Event" onclick="track_blockevent()">

    <script>

	function view_products() {
   		document.getElementById("product_list").style.display = "block";
		
		analytics.track('Product List Viewed', {
		     list_id: 'Allergy Medications',
		     category: 'Search Results',
		     products: [ {
			   product_id: '39011',
			   ndc: '50580-779-12',
			   name: 'Zyrtec',
			   price: 50.00,
			   position: 1,
			   image_url: '/images/zyrtec.jpg'
		     }, {
			   product_id: '39012',
			   ndc: '16590-852-30',
			   name: 'Allegra',
			   price: 55.00,
			   position: 2,
			   image_url: '/images/allegra.jpg'
		     }, {
			   product_id: '39013',
			   ndc: '11523-0007-80',
			   name: 'Claritin',
			   price: 55.00,
			   position: 3,
			   image_url: '/images/claritin.jpg'
		     } ] 
		}); 
	}
	    
	function identify_event(first, last, email, condition){
		var id = Math.floor(Math.random() * 10000000) + 1;
		
		analytics.identify(id, {
                  name: first.concat(" ", last),
                  email: email,
                  firstname: first,
                  lastname: last,
		  ssn: "FAKE_SSN",
                  condition: condition
                });
	}
      
	function track_event(product_name, product_ndc){
		 document.getElementById('carted').value = product_name;
		 analytics.track('Product Carted', {
		    name: product_name,
		    ndc: product_ndc
		  });
	}
	    
	function track_checkout(product_name){
		 analytics.track('Product CheckedOut', {
		    name: product_name
		  });          
        }
	    
	function track_blockevent(){
		 analytics.track('Block Event', {
		    name: 'corrupt',
		    ndc: 'invalid'
		  });
	}
    </script>
</body>

</html>
